<div class="page-header">
    <!-- <a class="pull-right btn btn-primary" ng-click="addWidget()"><i class="glyphicon glyphicon-plus"></i> Add Widget</a> -->
    <!-- <a class="pull-right btn btn-warning" ng-click="clear()"><i class="glyphicon glyphicon-trash"></i> Clear</a> -->
</div>
<div gridster="gridsterOptions">
    <div ng-model="widgets">
        <ul>
            <li gridster-item="widget" ng-repeat="widget in widgets | filter: {allowed: true}">
                <div class="box" ng-controller="CustomWidgetCtrl">
                    <div class="box-header">
                        <section>
                            <h3>{{widget.title}}</h3>
                        </section>
                        <div class="box-header-btns pull-right">
                        	<i>{{widget.cards.length}}</i>
                            <a title="settings" ng-click="openSettings(widget)"><i class="glyphicon glyphicon-cog"></i></a>
                            <a title="Remove widget" ng-click="remove(widget)"><i class="glyphicon glyphicon-trash"></i></a>
                        </div>
                    </div>
                    <div class="box-content">
                        <ul class="connectedSortable" ui-sortable="sortableTemplates" sortable ng-model="widget.cards" widget-status="{{widget.status_id}}">
                            <li class="card" ng-click="editCard(widget, card)" ng-repeat="card in widget.cards" id="{{card.id}}">
                                <img class="thumb" ng-src="http://blog.no-panic.at/wp-content/uploads/2011/04/redmine_logo_v1.png" />
                                <p>
                                    {{card.subject}}
                                </p>

                                <div id="overlay">
                                    <img id="loading" src="http://bit.ly/pMtW1K ">
                                    </img>
                                </div>
                            </li>
                            <li ng-show="widget.cards.length===0" style="background-color: #CCEEFA; visibility: hidden;">&nbsp;</li>
                        </ul>
                        <a class="pull-right btn btn-primary " ng-click="editCard(widget, card)"><i class="glyphicon glyphicon-plus "></i> Add Card</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>